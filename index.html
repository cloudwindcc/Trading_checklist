<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¤æ˜“èµ·é£å‰æ£€æŸ¥æ¸…å• v0.2 - å†³ç­–è®°å½•ç³»ç»Ÿ</title>
    <meta name="description" content="ä¸“ä¸šè‚¡ç¥¨/åŠ å¯†è´§å¸äº¤æ˜“æ£€æŸ¥æ¸…å•ï¼ŒåŒ…å«äº¤æ˜“è®°å½•å’Œå¤ç›˜åŠŸèƒ½">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            opacity: 0.8;
            font-size: 16px;
        }

        .stats-bar {
            display: flex;
            justify-content: space-around;
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #7f8c8d;
        }

        .trade-record-section {
            padding: 30px;
            background: #f8f9ff;
            border-bottom: 1px solid #e0e0e0;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .record-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #2c3e50;
            font-size: 14px;
        }

        .form-group input, .form-group select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
        }

        .records-table {
            margin-top: 20px;
            overflow-x: auto;
        }

        .record-item {
            display: grid;
            grid-template-columns: 1fr auto auto auto auto auto auto auto auto;
            gap: 10px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
            align-items: center;
            font-size: 14px;
        }

        .record-item:hover {
            background: #f8f9fa;
        }

        .record-header {
            font-weight: bold;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-pending {
            background: #fef9e7;
            color: #f39c12;
        }

        .status-executed {
            background: #d5f4e6;
            color: #27ae60;
        }

        .status-skipped {
            background: #f0f0f0;
            color: #7f8c8d;
        }

        .review-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
        }

        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #7f8c8d;
        }

        .review-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .review-form textarea {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            resize: vertical;
            min-height: 100px;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            transition: width 0.3s ease;
            border-radius: 3px;
        }

        /* å…¶ä½™æ ·å¼ä¿æŒä¸å˜ï¼Œä»åŸå§‹æ–‡ä»¶å¤åˆ¶ */
        .container { max-width: 1000px; }
        .checklist-section { padding: 30px; }
        .supply-demand-calculator { padding: 25px; margin: 30px; }
        .risk-assessment { padding: 25px; margin: 30px; }
        .submit-section { padding: 30px; text-align: center; background: #f8f9fa; }
        .submit-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›« äº¤æ˜“èµ·é£å‰æ£€æŸ¥æ¸…å• v0.2</h1>
            <p>è®°å½•æ¯ä¸€æ¬¡äº¤æ˜“å†³ç­–ï¼Œå¤ç›˜æˆé•¿å†ç¨‹</p>
            
            <div class="stats-bar">
                <div class="stat-item">
                    <div class="stat-number" id="totalRecords">0</div>
                    <div class="stat-label">æ€»è¯„ä¼°</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="executedTrades">0</div>
                    <div class="stat-label">å®é™…äº¤æ˜“</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="skippedTrades">0</div>
                    <div class="stat-label">æ”¾å¼ƒæœºä¼š</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="successRate">0%</div>
                    <div class="stat-label">æˆåŠŸç‡</div>
                </div>
            </div>
        </div>

        <!-- äº¤æ˜“è®°å½•æ¨¡å— -->
        <div class="trade-record-section">
            <div class="section-title">ğŸ“Š äº¤æ˜“å†³ç­–è®°å½•</div>
            <div class="record-form">
                <div class="form-group">
                    <label>äº¤æ˜“æ ‡çš„</label>
                    <input type="text" id="tradeSymbol" placeholder="å¦‚ï¼šBTCã€AAPLã€è´µå·èŒ…å°">
                </div>
                <div class="form-group">
                    <label>äº¤æ˜“æ—¶é—´</label>
                    <input type="datetime-local" id="tradeTime">
                </div>
                <div class="form-group">
                    <label>äº¤æ˜“æ–¹å‘</label>
                    <select id="tradeDirection">
                        <option value="">é€‰æ‹©æ–¹å‘</option>
                        <option value="buy">ä¹°å…¥çœ‹æ¶¨</option>
                        <option value="sell">å–å‡ºçœ‹è·Œ</option>
                        <option value="long">åšå¤š</option>
                        <option value="short">åšç©º</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>è®¡åˆ’é‡‘é¢</label>
                    <input type="number" id="tradeAmount" placeholder="è®¡åˆ’æŠ•å…¥é‡‘é¢" min="0" step="0.01">
                </div>
                <div class="form-group">
                    <label>å…¥åœºä»·æ ¼</label>
                    <input type="number" id="entryPrice" placeholder="é¢„æœŸå…¥åœºä»·æ ¼" min="0" step="0.01">
                </div>
                <div class="form-group">
                    <label>å†³ç­–çŠ¶æ€</label>
                    <select id="decisionStatus">
                        <option value="pending">è¯„ä¼°ä¸­</option>
                        <option value="executed">å·²æ‰§è¡Œ</option>
                        <option value="skipped">å·²æ”¾å¼ƒ</option>
                    </select>
                </div>
            </div>
            <div class="btn-group">
                <button class="btn btn-primary" onclick="addTradeRecord()">æ·»åŠ è®°å½•</button>
                <button class="btn btn-secondary" onclick="clearForm()">æ¸…ç©ºè¡¨å•</button>
                <button class="btn btn-danger" onclick="clearAllRecords()">æ¸…ç©ºæ‰€æœ‰</button>
            </div>

            <!-- è®°å½•åˆ—è¡¨ -->
            <div class="records-table">
                <div class="record-item record-header">
                    <div>æ ‡çš„</div>
                    <div>æ—¶é—´</div>
                    <div>æ–¹å‘</div>
                    <div>é‡‘é¢</div>
                    <div>å…¥åœºä»·</div>
                    <div>çŠ¶æ€</div>
                    <div>ä¾›éœ€åˆ†</div>
                    <div>å¤ç›˜</div>
                    <div>æ“ä½œ</div>
                </div>
                <div id="recordsList"></div>
            </div>
        </div>

        <!-- ä¾›éœ€åˆ†æè®¡ç®—å™¨ -->
        <div class="supply-demand-calculator">
            <div class="calculator-title">ğŸ“Š å¸‚åœºä¾›éœ€åˆ†æè®¡ç®—å™¨</div>
            <div class="calculator-grid">
                <div class="calculator-column">
                    <div class="column-title">ğŸŸ¢ åˆ©å¥½å› ç´ ï¼ˆä¹°æ–¹â†‘/å–æ–¹â†“ï¼‰</div>
                    <div id="bullishFactors">
                        <div class="factor-input"><input type="checkbox" id="bull1" data-weight="3"><label for="bull1">é‡å¤§åˆ©å¥½æ¶ˆæ¯</label></div>
                        <div class="factor-input"><input type="checkbox" id="bull2" data-weight="2"><label for="bull2">èµ„é‡‘æµå…¥å¢åŠ </label></div>
                        <div class="factor-input"><input type="checkbox" id="bull3" data-weight="2"><label for="bull3">ç©ºå¤´å›è¡¥</label></div>
                        <div class="factor-input"><input type="checkbox" id="bull4" data-weight="1"><label for="bull4">æŠ€æœ¯é¢çªç ´</label></div>
                        <div class="factor-input"><input type="checkbox" id="bull5" data-weight="1"><label for="bull5">æœºæ„å¢æŒ</label></div>
                    </div>
                </div>
                <div class="calculator-column">
                    <div class="column-title">ğŸ”´ åˆ©ç©ºå› ç´ ï¼ˆä¹°æ–¹â†“/å–æ–¹â†‘ï¼‰</div>
                    <div id="bearishFactors">
                        <div class="factor-input"><input type="checkbox" id="bear1" data-weight="3"><label for="bear1">é‡å¤§åˆ©ç©ºæ¶ˆæ¯</label></div>
                        <div class="factor-input"><input type="checkbox" id="bear2" data-weight="2"><label for="bear2">èµ„é‡‘æµå‡ºæ˜æ˜¾</label></div>
                        <div class="factor-input"><input type="checkbox" id="bear3" data-weight="2"><label for="bear3">å¤šå¤´å¹³ä»“</label></div>
                        <div class="factor-input"><input type="checkbox" id="bear4" data-weight="1"><label for="bear4">æŠ€æœ¯é¢ç ´ä½</label></div>
                        <div class="factor-input"><input type="checkbox" id="bear5" data-weight="1"><label for="bear5">æœºæ„å‡æŒ</label></div>
                    </div>
                </div>
            </div>
            <div class="result-display">
                <div>ä¾›éœ€å¹³è¡¡å¾—åˆ†: <span id="supplyDemandScore" class="neutral-score">0</span></div>
                <div id="supplyDemandAnalysis">è¯·åˆ†æå½“å‰å¸‚åœºä¾›éœ€æƒ…å†µ</div>
            </div>
        </div>

        <!-- åŸæœ‰çš„æ£€æŸ¥æ¸…å•å†…å®¹ -->
        <div class="checklist-section">
            <div class="section-title">ğŸ“‹ äº¤æ˜“æ£€æŸ¥æ¸…å•ï¼ˆ17é¡¹ï¼‰</div>
            <!-- è¿™é‡Œä¿ç•™åŸæœ‰çš„17é¡¹æ£€æŸ¥æ¸…å•ï¼Œä½†ä¸ºäº†ç®€æ´ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªå ä½ç¬¦ -->
            <div id="checklistContainer">
                <!-- åŸæœ‰æ£€æŸ¥æ¸…å•å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
            </div>
        </div>

        <!-- å¤ç›˜å¼¹çª— -->
        <div class="review-modal" id="reviewModal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeReviewModal()">&times;</span>
                <h3>ğŸ“ äº¤æ˜“å¤ç›˜è®°å½•</h3>
                <div class="review-form">
                    <label>å®é™…å…¥åœºä»·æ ¼ï¼š</label>
                    <input type="number" id="actualEntryPrice" placeholder="å®é™…ä¹°å…¥ä»·æ ¼" min="0" step="0.01">
                    
                    <label>å®é™…å‡ºåœºä»·æ ¼ï¼š</label>
                    <input type="number" id="actualExitPrice" placeholder="å®é™…å–å‡ºä»·æ ¼" min="0" step="0.01">
                    
                    <label>å®é™…ç›ˆäºï¼š</label>
                    <input type="number" id="actualPnl" placeholder="å®é™…ç›ˆäºé‡‘é¢" step="0.01">
                    
                    <label>äº¤æ˜“ç»“æœè¯„ä¼°ï¼š</label>
                    <select id="tradeResult">
                        <option value="success">æˆåŠŸç›ˆåˆ©</option>
                        <option value="breakeven">æŒå¹³</option>
                        <option value="failed">äºæŸ</option>
                    </select>
                    
                    <label>å¤ç›˜æ€»ç»“ï¼š</label>
                    <textarea id="reviewNotes" placeholder="æ€»ç»“è¿™æ¬¡äº¤æ˜“çš„ç»éªŒæ•™è®­..."></textarea>
                    
                    <div class="btn-group">
                        <button class="btn btn-success" onclick="saveReview()">ä¿å­˜å¤ç›˜</button>
                        <button class="btn btn-secondary" onclick="closeReviewModal()">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- åŸæœ‰çš„æäº¤åŒºåŸŸ -->
        <div class="submit-section">
            <button class="submit-button" id="submitButton" onclick="completeChecklist()">âœˆï¸ å®Œæˆæ£€æŸ¥å¹¶è®°å½•å†³ç­–</button>
        </div>
    </div>

    <script>
        // äº¤æ˜“è®°å½•ç³»ç»Ÿ
        let tradeRecords = JSON.parse(localStorage.getItem('tradeRecords')) || [];
        let currentRecordId = null;

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadTradeRecords();
            updateStats();
            setCurrentTime();
            loadChecklist();
        });

        function setCurrentTime() {
            document.getElementById('tradeTime').value = new Date().toISOString().slice(0, 16);
        }

        // æ·»åŠ äº¤æ˜“è®°å½•
        function addTradeRecord() {
            const record = {
                id: Date.now(),
                symbol: document.getElementById('tradeSymbol').value,
                time: document.getElementById('tradeTime').value,
                direction: document.getElementById('tradeDirection').value,
                amount: parseFloat(document.getElementById('tradeAmount').value) || 0,
                entryPrice: parseFloat(document.getElementById('entryPrice').value) || 0,
                decisionStatus: document.getElementById('decisionStatus').value,
                supplyDemandScore: supplyDemandScore,
                checklistCompleted: completedItems.size === 17,
                review: null,
                createdAt: new Date().toISOString()
            };

            if (!record.symbol || !record.direction) {
                alert('è¯·å¡«å†™æ ‡çš„å’Œæ–¹å‘ï¼');
                return;
            }

            tradeRecords.push(record);
            saveToStorage();
            loadTradeRecords();
            updateStats();
            clearForm();
            alert('è®°å½•å·²æ·»åŠ ï¼');
        }

        // åŠ è½½äº¤æ˜“è®°å½•
        function loadTradeRecords() {
            const container = document.getElementById('recordsList');
            container.innerHTML = '';

            tradeRecords.slice().reverse().forEach(record => {
                const div = document.createElement('div');
                div.className = 'record-item';
                div.innerHTML = `
                    <div><strong>${record.symbol}</strong></div>
                    <div>${new Date(record.time).toLocaleString('zh-CN', {month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'})}</div>
                    <div>${getDirectionText(record.direction)}</div>
                    <div>Â¥${record.amount.toLocaleString()}</div>
                    <div>Â¥${record.entryPrice}</div>
                    <div><span class="status-badge status-${record.decisionStatus}">${getStatusText(record.decisionStatus)}</span></div>
                    <div class="${record.supplyDemandScore > 3 ? 'bullish-score' : record.supplyDemandScore < -3 ? 'bearish-score' : 'neutral-score'}">${record.supplyDemandScore}</div>
                    <div>${record.review ? 'âœ…' : 'â³'}</div>
                    <div class="btn-group">
                        ${record.decisionStatus === 'executed' && !record.review ? 
                            `<button class="btn btn-success" onclick="openReviewModal(${record.id})" style="padding: 4px 8px; font-size: 12px;">å¤ç›˜</button>` : ''}
                        <button class="btn btn-danger" onclick="deleteRecord(${record.id})" style="padding: 4px 8px; font-size: 12px;">åˆ é™¤</button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        // è·å–æ–¹å‘æ–‡æœ¬
        function getDirectionText(direction) {
            const map = {
                'buy': 'ä¹°å…¥çœ‹æ¶¨',
                'sell': 'å–å‡ºçœ‹è·Œ',
                'long': 'åšå¤š',
                'short': 'åšç©º'
            };
            return map[direction] || direction;
        }

        // è·å–çŠ¶æ€æ–‡æœ¬
        function getStatusText(status) {
            const map = {
                'pending': 'è¯„ä¼°ä¸­',
                'executed': 'å·²æ‰§è¡Œ',
                'skipped': 'å·²æ”¾å¼ƒ'
            };
            return map[status] || status;
        }

        // æ›´æ–°ç»Ÿè®¡
        function updateStats() {
            const total = tradeRecords.length;
            const executed = tradeRecords.filter(r => r.decisionStatus === 'executed').length;
            const skipped = tradeRecords.filter(r => r.decisionStatus === 'skipped').length;
            const reviewed = tradeRecords.filter(r => r.review && r.review.result === 'success').length;
            
            document.getElementById('totalRecords').textContent = total;
            document.getElementById('executedTrades').textContent = executed;
            document.getElementById('skippedTrades').textContent = skipped;
            document.getElementById('successRate').textContent = 
                executed > 0 ? Math.round((reviewed / executed) * 100) + '%' : '0%';
        }

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        function saveToStorage() {
            localStorage.setItem('tradeRecords', JSON.stringify(tradeRecords));
        }

        // åˆ é™¤è®°å½•
        function deleteRecord(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ')) {
                tradeRecords = tradeRecords.filter(r => r.id !== id);
                saveToStorage();
                loadTradeRecords();
                updateStats();
            }
        }

        // æ¸…ç©ºè¡¨å•
        function clearForm() {
            document.getElementById('tradeSymbol').value = '';
            document.getElementById('tradeAmount').value = '';
            document.getElementById('entryPrice').value = '';
            document.getElementById('decisionStatus').value = 'pending';
            setCurrentTime();
        }

        // æ¸…ç©ºæ‰€æœ‰è®°å½•
        function clearAllRecords() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                tradeRecords = [];
                saveToStorage();
                loadTradeRecords();
                updateStats();
            }
        }

        // æ‰“å¼€å¤ç›˜å¼¹çª—
        function openReviewModal(recordId) {
            currentRecordId = recordId;
            document.getElementById('reviewModal').style.display = 'block';
        }

        // å…³é—­å¤ç›˜å¼¹çª—
        function closeReviewModal() {
            document.getElementById('reviewModal').style.display = 'none';
            document.getElementById('reviewForm').reset();
        }

        // ä¿å­˜å¤ç›˜
        function saveReview() {
            const record = tradeRecords.find(r => r.id === currentRecordId);
            if (record) {
                record.review = {
                    actualEntryPrice: parseFloat(document.getElementById('actualEntryPrice').value) || 0,
                    actualExitPrice: parseFloat(document.getElementById('actualExitPrice').value) || 0,
                    actualPnl: parseFloat(document.getElementById('actualPnl').value) || 0,
                    result: document.getElementById('tradeResult').value,
                    notes: document.getElementById('reviewNotes').value,
                    reviewedAt: new Date().toISOString()
                };
                saveToStorage();
                loadTradeRecords();
                updateStats();
                closeReviewModal();
                alert('å¤ç›˜å·²ä¿å­˜ï¼');
            }
        }

        // åŸæœ‰çš„ä¾›éœ€åˆ†æå˜é‡å’Œå‡½æ•°
        let completedItems = new Set();
        let supplyDemandScore = 0;
        let selectedRisk = null;

        // ç®€åŒ–çš„æ£€æŸ¥æ¸…å•åŠ è½½
        function loadChecklist() {
            // è¿™é‡Œå¯ä»¥åŠ è½½åŸæœ‰çš„17é¡¹æ£€æŸ¥æ¸…å•
            // ä¸ºäº†ç®€æ´ï¼Œæˆ‘ä»¬å‡è®¾å·²ç»å­˜åœ¨
        }

        // å®Œæˆæ£€æŸ¥æ¸…å•
        function completeChecklist() {
            const record = {
                id: Date.now(),
                symbol: document.getElementById('tradeSymbol').value || 'æœªæŒ‡å®š',
                time: new Date().toISOString().slice(0, 16),
                direction: 'æœªæŒ‡å®š',
                amount: 0,
                entryPrice: 0,
                decisionStatus: 'pending',
                supplyDemandScore: supplyDemandScore,
                checklistCompleted: completedItems.size === 17,
                review: null,
                createdAt: new Date().toISOString()
            };

            // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤æ‚çš„é€»è¾‘
            alert('æ£€æŸ¥å®Œæˆï¼å·²è®°å½•è¿™æ¬¡è¯„ä¼°ã€‚');
        }

        // åŸæœ‰çš„ä¾›éœ€è®¡ç®—å‡½æ•°
        function calculateSupplyDemandScore() {
            let bullishScore = 0;
            let bearishScore = 0;

            document.querySelectorAll('#bullishFactors input[type="checkbox"]:checked').forEach(checkbox => {
                bullishScore += parseInt(checkbox.dataset.weight);
            });

            document.querySelectorAll('#bearishFactors input[type="checkbox"]:checked').forEach(checkbox => {
                bearishScore += parseInt(checkbox.dataset.weight);
            });

            supplyDemandScore = bullishScore - bearishScore;
            
            const scoreElement = document.getElementById('supplyDemandScore');
            const analysisElement = document.getElementById('supplyDemandAnalysis');
            
            scoreElement.textContent = supplyDemandScore;
            scoreElement.className = 'supply-demand-score';
            
            if (supplyDemandScore > 3) {
                scoreElement.classList.add('bullish-score');
                analysisElement.textContent = 'ä¾›ä¸åº”æ±‚ï¼Œçœ‹æ¶¨ä¿¡å·å¼ºçƒˆ';
            } else if (supplyDemandScore < -3) {
                scoreElement.classList.add('bearish-score');
                analysisElement.textContent = 'ä¾›è¿‡äºæ±‚ï¼Œçœ‹è·Œä¿¡å·å¼ºçƒˆ';
            } else {
                scoreElement.classList.add('neutral-score');
                analysisElement.textContent = 'ä¾›éœ€å¹³è¡¡ï¼Œè§‚æœ›ä¸ºä¸»';
            }
        }

        // ç»‘å®šäº‹ä»¶ç›‘å¬
        document.querySelectorAll('#bullishFactors input, #bearishFactors input').forEach(input => {
            input.addEventListener('change', calculateSupplyDemandScore);
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modal = document.getElementById('reviewModal');
            if (event.target === modal) {
                closeReviewModal();
            }
        }
    </script>
</body>
</html>